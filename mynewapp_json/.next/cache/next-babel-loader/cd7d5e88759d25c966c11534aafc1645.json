{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Saksham\\\\mynewapp\\\\mynewapp\\\\pages\\\\testjsonserver.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport jwt from 'jsonwebtoken';\n\nconst Login = () => {\n  const {\n    0: name,\n    1: setName\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: message,\n    1: setMessage\n  } = useState(\"You are not logged in\");\n  const router = useRouter();\n\n  async function submitForm(e) {\n    e.preventDefault();\n    const res = await fetch(\"/api/login\", {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        password\n      })\n    }).then(t => t.json());\n    const token = res.token;\n\n    if (token) {\n      const json = jwt.decode(token);\n      setMessage(`You are now logged in ${json.name} and as a ${json.admin ? 'admin' : 'user'}`);\n    } else {\n      setMessage('No User found with this name. Please Sign Up.');\n    }\n  }\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 11\n    }\n  }, message), __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }, \"LOGIN\"), __jsx(\"form\", {\n    method: \"POST\",\n    action: \"/api/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    placeholder: \"name\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 12\n    }\n  }), __jsx(\"input\", {\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    onClick: e => submitForm(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, \"login\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Saksham/mynewapp/mynewapp/pages/testjsonserver.js"],"names":["Link","useState","useRouter","jwt","Login","name","setName","password","setPassword","message","setMessage","router","submitForm","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","then","t","json","token","decode","admin","target","value"],"mappings":";;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,SAAQC,QAAR,QAAuB,OAAvB;AACA,SAAQC,SAAR,QAAwB,aAAxB;AACA,OAAOC,GAAP,MAAgB,cAAhB;;AAEA,MAAMC,KAAK,GAAG,MAAI;AAChB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAMC;AAAN,MAAiBL,QAAQ,CAAC,EAAD,CAA/B;AACA,QAAM;AAAA,OAACM,QAAD;AAAA,OAAUC;AAAV,MAAyBP,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM;AAAA,OAACQ,OAAD;AAAA,OAASC;AAAT,MAAuBT,QAAQ,CAAC,uBAAD,CAArC;AACC,QAAMU,MAAM,GAAIT,SAAS,EAAzB;;AAEA,iBAAeU,UAAf,CAA0BC,CAA1B,EAA4B;AACxBA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMC,GAAG,GAAE,MAAMC,KAAK,CAAC,YAAD,EAAc;AAC/BC,MAAAA,MAAM,EAAE,MADuB;AAE/BC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFsB;AAK/BC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAChB,QAAAA,IAAD;AAAOE,QAAAA;AAAP,OAAf;AALyB,KAAd,CAAL,CAMbe,IANa,CAMRC,CAAC,IAAEA,CAAC,CAACC,IAAF,EANK,CAAjB;AAOC,UAAMC,KAAK,GAAEV,GAAG,CAACU,KAAjB;;AACA,QAAGA,KAAH,EAAS;AACL,YAAMD,IAAI,GAAGrB,GAAG,CAACuB,MAAJ,CAAWD,KAAX,CAAb;AACAf,MAAAA,UAAU,CAAE,yBAAwBc,IAAI,CAACnB,IAAK,aAAYmB,IAAI,CAACG,KAAL,GAAa,OAAb,GAAsB,MAAO,EAA7E,CAAV;AACH,KAHD,MAGK;AACDjB,MAAAA,UAAU,CAAC,+CAAD,CAAV;AACH;AACL;;AACA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,OAAL,CADJ,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAFF,EAGE;AAAM,IAAA,MAAM,EAAC,MAAb;AAAoB,IAAA,MAAM,EAAC,YAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAC,MAAxB;AAA+B,IAAA,WAAW,EAAC,MAA3C;AAAkD,IAAA,KAAK,EAAEJ,IAAzD;AACC,IAAA,QAAQ,EAAGQ,CAAD,IAAKP,OAAO,CAACO,CAAC,CAACe,MAAF,CAASC,KAAV,CADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,EAII;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,IAAI,EAAC,UAA5B;AAAuC,IAAA,WAAW,EAAC,UAAnD;AACA,IAAA,KAAK,EAAEtB,QADP;AAEA,IAAA,QAAQ,EAAGM,CAAD,IAAKL,WAAW,CAACK,CAAC,CAACe,MAAF,CAASC,KAAV,CAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,EAQI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAGhB,CAAD,IAAKD,UAAU,CAACC,CAAD,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aARJ,CAHF,CADF;AAiBD,CAxCH;;AA0CE,eAAeT,KAAf","sourcesContent":["import Link from 'next/link'\r\nimport {useState} from 'react'\r\nimport {useRouter} from 'next/router'\r\nimport jwt from 'jsonwebtoken';\r\n\r\nconst Login = ()=>{\r\n  const [name,setName] = useState(\"\");\r\n  const [password,setPassword] = useState(\"\");\r\n  const [message,setMessage] = useState(\"You are not logged in\");\r\n   const router  = useRouter();\r\n    \r\n   async function submitForm(e){\r\n       e.preventDefault();\r\n       const res= await fetch(\"/api/login\",{\r\n            method: 'POST',\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({name, password}),\r\n        }).then(t=>t.json());\r\n        const token =res.token;\r\n        if(token){\r\n            const json = jwt.decode(token);\r\n            setMessage(`You are now logged in ${json.name} and as a ${json.admin ? 'admin': 'user'}`);\r\n        }else{\r\n            setMessage('No User found with this name. Please Sign Up.');\r\n        }\r\n   }\r\n    return(\r\n      <div>\r\n          <h1>{message}</h1>\r\n        <h3>LOGIN</h3>\r\n        <form method=\"POST\" action=\"/api/login\">\r\n           <input type=\"text\" name=\"name\" placeholder=\"name\" value={name}\r\n            onChange={(e)=>setName(e.target.value)}\r\n            />\r\n            <input name=\"password\" type=\"password\" placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e)=>setPassword(e.target.value)}\r\n            />\r\n            <button type=\"submit\" onClick={(e)=>submitForm(e)}>login</button>\r\n            {/* <Link href=\"/signup\"><a><h5>Don't have a account ?</h5></a></Link> */}\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  export default Login"]},"metadata":{},"sourceType":"module"}